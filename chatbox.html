<!-- The following line is essential for the "position: fixed" property to work correctly in IE -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Chatbox</title>
    <link rel="stylesheet" href="jquery-ui-1.8.2.custom/css/ui-lightness/jquery-ui-1.8.2.custom.css" type="text/css" media="screen" />
    <script type="text/javascript" src="jquery-ui-1.8.2.custom/js/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="jquery-ui-1.8.2.custom/js/jquery-ui-1.8.2.custom.min.js"></script>
    <link type="text/css" href="jquery.ui.chatbox.css" rel="stylesheet" />
	<link type="text/css" href="style.css" rel="stylesheet" />
	
    <script type="text/javascript" src="jquery.ui.chatbox.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){
          var box = null;		  
		  $("#chatlink").click(function(event, ui) {
              if(box) {
                  box.chatbox("option", "boxManager").toggleBox();
              } else {
                  box = $("#chat_div").chatbox({id:"You", 
										user:{key : "value"},
										title : "Chat Window <span style='font-size: 9px; padding-left:60px'>(Click close to exit)</span>",
										messageSent : function(id, user, msg) {
											$("#chat_div").chatbox("option", "boxManager").addMsg(id, msg);
										}});
              }
          });
      });
	  
	 function ajaxRequest(actionName,option){
		var optionsLocal = {"showSpinner":option};
		$.ajax({
		url: actionName,
		type: "POST",
		cache: false,
		data:"",
		dataType:"html",
		context: document.body,
		success: function(data) {
		   $('#pagewrap').html(data);
		},
		beforeSend:function (){
		  if(optionsLocal.showSpinner==true){
		   $('#ajaxImage').show();
		   $('#ajaxBackground').show();
		  }
		},
		complete:function (){
		  if(optionsLocal.showSpinner==true){
		    $('#ajaxImage').hide();
		    $('#ajaxBackground').hide();
		  }
		},
		error: function(){
		  //Hide the spinner div
		  $('#ajaxImage').hide();
		  $('#ajaxBackground').hide();
		 }
	    });
	  };
    </script>
  </head>
  <body>
	<a id="chatlink" href="javascript:void(0);">Click to Chat</a>
    <div id="chat_div"> </div>
  </body>
</html>
